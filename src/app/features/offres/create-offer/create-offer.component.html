<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <button *ngIf="user?.role == 'ADMINISTRATEUR'" class="btn btn-info float-right" type="button"
        data-toggle="collapse" data-target="#collapseForm" aria-expanded="false" aria-controls="collapseForm">
        Ajouter une offre
      </button>
    </div>
    <div class="col-12">
      <div class="collapse" id="collapseForm">
        <div class="mb-3 card-body">
          <form (ngSubmit)="onSubmit()" [formGroup]="offerForm">
            <div class="form-row">
              <div class="form-group col-12">
                <input [ngClass]="offerForm.get('pseudo').errors ? 'is-invalid' : 'is-valid'
               " class="form-control" placeholder="Pseudo" name="pseudo" type="text" formControlName="pseudo" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-6">
                <input [ngClass]="offerForm.get('client').errors ? 'is-invalid' : 'is-valid'
                " class="form-control" placeholder="Nom du client" name="client" type="text"
                  formControlName="client" />
              </div>
              <div class="form-group col-6">
                <input [ngClass]="offerForm.get('remise').errors ? 'is-invalid' : 'is-valid'
                " class="form-control" placeholder="Prix remisé" name="remise" type="text" formControlName="remise" />
              </div>
            </div>
            <div formGroupName="contrat">
              <div class="form-row">
                <div class="form-group col-6">
                  <input [ngClass]="
                  offerForm.get('contrat').get('debut').errors ? 'is-invalid' : 'is-valid'
                " class="form-control" placeholder="Début de l'offre" name="debut" type="text" formControlName="debut"
                    onfocus="(this.type='date')" onblur="(this.type='text')" />
                </div>
                <div class="form-group col-6">
                  <input [ngClass]="
                  offerForm.get('contrat').get('fin').errors ? 'is-invalid' : 'is-valid'
                " class="form-control" placeholder="Fin de l'offre" name="fin" type="text" formControlName="fin"
                    onfocus="(this.type='date')" onblur="(this.type='text')" />
                </div>
              </div>
            </div>
            <div formGroupName="coupon">
              <input [ngClass]="
                  offerForm.get('coupon').get('total').errors
                    ? 'is-invalid'
                    : 'is-valid'
                " class="form-control" placeholder="Total disponible" name="total" type="number"
                formControlName="total" />
            </div>
            <div class="row mt-3">
              <div class="col">
                <div class="form-group">
                  <textarea [ngClass]="offerForm.get('details').errors ? 'is-invalid' : 'is-valid'" class="form-control"
                    placeholder="Détails supplémentaires" maxlength="300" name="details" type="text"
                    formControlName="details"></textarea>
                  <small class="float-right">300 caractères maximum</small>
                </div>
              </div>
            </div>
            <button class="btn btn-info btn-block mt-3 mb-1" type="submit" [disabled]="!offerForm.valid">
              Sauvegarder
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>